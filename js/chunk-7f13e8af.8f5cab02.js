(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f13e8af"],{"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3fa5":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".Pthree-js[data-v-d405ee56],.threejs[data-v-d405ee56]{position:relative;height:100%;width:100%}",""]),t.exports=e},4209:function(t,e,n){var i=n("3fa5");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("0d77f855",i,!0,{sourceMap:!1,shadowMode:!1})},b7d9:function(t,e,n){"use strict";n("4209")},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},e276:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"threejs",attrs:{id:"three"}},[n("span",{on:{click:t.deleteee}},[t._v("标注")]),n("span",{on:{click:t.add}},[t._v("取消标注")])])},o=[],r=n("5a89");class s extends r["k"]{constructor(t){super(t),this.littleEndian=!0}load(t,e,n,i){const o=this,s=new r["h"](o.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(n){try{e(o.parse(n))}catch(r){i?i(r):console.error(r),o.manager.itemError(t)}}),n,i)}parse(t){function e(t,e){const n=t.length,i=new Uint8Array(e);let o,r,s,a=0,l=0;do{if(o=t[a++],o<32){if(o++,l+o>e)throw new Error("Output buffer is not large enough");if(a+o>n)throw new Error("Invalid compressed data");do{i[l++]=t[a++]}while(--o)}else{if(r=o>>5,s=l-((31&o)<<8)-1,a>=n)throw new Error("Invalid compressed data");if(7===r&&(r+=t[a++],a>=n))throw new Error("Invalid compressed data");if(s-=t[a++],l+r+2>e)throw new Error("Output buffer is not large enough");if(s<0)throw new Error("Invalid compressed data");if(s>=l)throw new Error("Invalid compressed data");do{i[l++]=i[s++]}while(2+--r)}}while(a<n);return i}function n(t){const e={},n=t.search(/[\r\n]DATA\s(\S*)\s/i),i=/[\r\n]DATA\s(\S*)\s/i.exec(t.slice(n-1));if(e.data=i[1],e.headerLen=i[0].length+n,e.str=t.slice(0,e.headerLen),e.str=e.str.replace(/\#.*/gi,""),e.version=/VERSION (.*)/i.exec(e.str),e.fields=/FIELDS (.*)/i.exec(e.str),e.size=/SIZE (.*)/i.exec(e.str),e.type=/TYPE (.*)/i.exec(e.str),e.count=/COUNT (.*)/i.exec(e.str),e.width=/WIDTH (.*)/i.exec(e.str),e.height=/HEIGHT (.*)/i.exec(e.str),e.viewpoint=/VIEWPOINT (.*)/i.exec(e.str),e.points=/POINTS (.*)/i.exec(e.str),null!==e.version&&(e.version=parseFloat(e.version[1])),e.fields=null!==e.fields?e.fields[1].split(" "):[],null!==e.type&&(e.type=e.type[1].split(" ")),null!==e.width&&(e.width=parseInt(e.width[1])),null!==e.height&&(e.height=parseInt(e.height[1])),null!==e.viewpoint&&(e.viewpoint=e.viewpoint[1]),null!==e.points&&(e.points=parseInt(e.points[1],10)),null===e.points&&(e.points=e.width*e.height),null!==e.size&&(e.size=e.size[1].split(" ").map((function(t){return parseInt(t,10)}))),null!==e.count)e.count=e.count[1].split(" ").map((function(t){return parseInt(t,10)}));else{e.count=[];for(let t=0,n=e.fields.length;t<n;t++)e.count.push(1)}e.offset={};let o=0;for(let r=0,s=e.fields.length;r<s;r++)"ascii"===e.data?e.offset[e.fields[r]]=r:(e.offset[e.fields[r]]=o,o+=e.size[r]*e.count[r]);return e.rowSize=o,e}const i=r["l"].decodeText(new Uint8Array(t)),o=n(i),s=[],a=[],l=[],u=[],c=[];if("ascii"===o.data){const t=o.offset,e=i.slice(o.headerLen),n=e.split("\n");for(let i=0,r=n.length;i<r;i++){if(""===n[i])continue;const e=n[i].split(" ");if(void 0!==t.x&&(s.push(parseFloat(e[t.x])),s.push(parseFloat(e[t.y])),s.push(parseFloat(e[t.z]))),void 0!==t.rgb){const n=o.fields.findIndex(t=>"rgb"===t),i=o.type[n],r=parseFloat(e[t.rgb]);let s=r;if("F"===i){const t=new Float32Array(1);t[0]=r,s=new Int32Array(t.buffer)[0]}const a=s>>16&255,u=s>>8&255,c=s>>0&255;l.push(a/255,u/255,c/255)}void 0!==t.normal_x&&(a.push(parseFloat(e[t.normal_x])),a.push(parseFloat(e[t.normal_y])),a.push(parseFloat(e[t.normal_z]))),void 0!==t.intensity&&u.push(parseFloat(e[t.intensity])),void 0!==t.label&&c.push(parseInt(e[t.label]))}}if("binary_compressed"===o.data){const n=new Uint32Array(t.slice(o.headerLen,o.headerLen+8)),i=n[0],r=n[1],h=e(new Uint8Array(t,o.headerLen+8,i),r),d=new DataView(h.buffer),p=o.offset;for(let t=0;t<o.points;t++){if(void 0!==p.x){const e=o.fields.indexOf("x"),n=o.fields.indexOf("y"),i=o.fields.indexOf("z");s.push(d.getFloat32(o.points*p.x+o.size[e]*t,this.littleEndian)),s.push(d.getFloat32(o.points*p.y+o.size[n]*t,this.littleEndian)),s.push(d.getFloat32(o.points*p.z+o.size[i]*t,this.littleEndian))}if(void 0!==p.rgb){const e=o.fields.indexOf("rgb");l.push(d.getUint8(o.points*p.rgb+o.size[e]*t+2)/255),l.push(d.getUint8(o.points*p.rgb+o.size[e]*t+1)/255),l.push(d.getUint8(o.points*p.rgb+o.size[e]*t+0)/255)}if(void 0!==p.normal_x){const e=o.fields.indexOf("normal_x"),n=o.fields.indexOf("normal_y"),i=o.fields.indexOf("normal_z");a.push(d.getFloat32(o.points*p.normal_x+o.size[e]*t,this.littleEndian)),a.push(d.getFloat32(o.points*p.normal_y+o.size[n]*t,this.littleEndian)),a.push(d.getFloat32(o.points*p.normal_z+o.size[i]*t,this.littleEndian))}if(void 0!==p.intensity){const e=o.fields.indexOf("intensity");u.push(d.getFloat32(o.points*p.intensity+o.size[e]*t,this.littleEndian))}if(void 0!==p.label){const e=o.fields.indexOf("label");c.push(d.getInt32(o.points*p.label+o.size[e]*t,this.littleEndian))}}}if("binary"===o.data){const e=new DataView(t,o.headerLen),n=o.offset;for(let t=0,i=0;t<o.points;t++,i+=o.rowSize)void 0!==n.x&&(s.push(e.getFloat32(i+n.x,this.littleEndian)),s.push(e.getFloat32(i+n.y,this.littleEndian)),s.push(e.getFloat32(i+n.z,this.littleEndian))),void 0!==n.rgb&&(l.push(e.getUint8(i+n.rgb+2)/255),l.push(e.getUint8(i+n.rgb+1)/255),l.push(e.getUint8(i+n.rgb+0)/255)),void 0!==n.normal_x&&(a.push(e.getFloat32(i+n.normal_x,this.littleEndian)),a.push(e.getFloat32(i+n.normal_y,this.littleEndian)),a.push(e.getFloat32(i+n.normal_z,this.littleEndian))),void 0!==n.intensity&&u.push(e.getFloat32(i+n.intensity,this.littleEndian)),void 0!==n.label&&c.push(e.getInt32(i+n.label,this.littleEndian))}const h=new r["e"];s.length>0&&h.setAttribute("position",new r["i"](s,3)),a.length>0&&h.setAttribute("normal",new r["i"](a,3)),l.length>0&&h.setAttribute("color",new r["i"](l,3)),u.length>0&&h.setAttribute("intensity",new r["i"](u,1)),c.length>0&&h.setAttribute("label",new r["j"](c,1)),h.computeBoundingSphere();const d=new r["r"]({size:.005});return l.length>0&&(d.vertexColors=!0),new r["q"](h,d)}}var a=n("4721"),l=n("fa06"),u={name:"zzm-three-js",computed:{},data(){return{isbiaozhu:!0,animationId:null,elem:null,scene:null,camera:null,renderer:null,loader:null,controls:null,publicPath:"/",dom:"",ControlsType:"3D"}},methods:{getcanvas(){const t=this,e=document.getElementById("three");let n,i,o=!1,s=[];function a(){console.log(123),t.isbiaozhu&&(document.getElementById("lasso")||(l("canvas","lasso"),i=n.getContext("2d"),n.style.cursor="cursor")),e.addEventListener("mousedown",t=>{u(t)}),e.addEventListener("mousemove",t=>{c(t)}),e.addEventListener("mouseup",t=>{h(t)})}function l(t,i){const o=document.createElement(t);o.style.position="absolute",o.style.left="0px",o.style.top="21px",o.id=i,o.style.backgroundColor="rgba(255,255,255,0)",o.style.display="none",window.devicePixelRatio&&(o.style.width=e.clientWidth+"px",o.style.height=e.clientHeight+"px",o.height=e.clientHeight*window.devicePixelRatio,o.width=e.clientWidth*window.devicePixelRatio),e.appendChild(o),n=o}function u(e){const i=n.getBoundingClientRect();t.isbiaozhu||(o=!0,s=[],console.log(i.top),console.log(e),s.push({x:e.clientX-i.left,y:e.clientY-i.top}),n.style.cursor="cell",e.stopPropagation())}function c(e){if(!t.isbiaozhu&&o){let t=0,o=0;const r=n.getBoundingClientRect();t=e.clientX,o=e.clientY,s.push({x:t-r.left,y:o-r.top}),i.lineWidth=2,i.strokeStyle="rgba(57,207,255,1.0)",i.fillStyle="rgba(224, 245, 255, 0.25)",i.lineJoin="round",i.lineCap="round",i.clearRect(0,0,i.canvas.width,i.canvas.height);let a=s[0],l=s[1];const u=s.length,c=function(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}};i.beginPath(),i.moveTo(a.x,a.y);for(let e=1;e<u;e++){const t=c(a,l);i.quadraticCurveTo(a.x,a.y,t.x,t.y),a=s[e],l=s[e+1]}i.lineTo(a.x,a.y),i.stroke(),i.fill(),e.stopPropagation()}}function h(e){if(!t.isbiaozhu&&o){o=!1;const e=s.map(e=>t.get3DPosByCanvasPos({x:e.x/t.elem.clientWidth*2-1,y:-e.y/t.elem.clientHeight*2+1})),l=s.map(e=>t.get3DPosByCanvasPoss({x:e.x/t.elem.clientWidth*2-1,y:-e.y/t.elem.clientHeight*2+1}));var n=new r["b"];n.setFromPoints(e.concat(l)),console.log("box3",n);var i=new r["b"];i.setFromPoints(e),console.log("box3",i);var a=new r["b"];a.setFromPoints(l),console.log("box3",a);const u=[],c=t.scene.getObjectByName("Zaghetto.pcd");for(let n=0;n<c.geometry.attributes.position.count;n++){const e={x:c.geometry.attributes.position.array[3*n],y:c.geometry.attributes.position.array[3*n+1],z:c.geometry.attributes.position.array[3*n+2],index:n};t.queryPtInPolygon(e,l)?(u.push(e),c.geometry.attributes.color.array[3*n]=11.97149658203125,c.geometry.attributes.color.array[3*n+1]=7.171534538269043,c.geometry.attributes.color.array[3*n+2]=.4309532642364502):(c.geometry.attributes.color.array[3*n]=0,c.geometry.attributes.color.array[3*n+1]=0,c.geometry.attributes.color.array[3*n+2]=0)}c.geometry.attributes.color.needsUpdate=!0,t.add(),setTimeout(()=>{for(let t=0;t<c.geometry.attributes.position.count;t++)c.geometry.attributes.color.array[3*t]=.02573108673095703,c.geometry.attributes.color.array[3*t+1]=2.431320905685425,c.geometry.attributes.color.array[3*t+2]=11.70892333984375;for(let t=0;t<u.length;t++)c.geometry.attributes.color.array[3*u[t].index]=11.97149658203125,c.geometry.attributes.color.array[3*u[t].index+1]=7.171534538269043,c.geometry.attributes.color.array[3*u[t].index+2]=.4309532642364502;c.geometry.attributes.color.needsUpdate=!0},5e3)}}a()},get3DPosByCanvasPos(t,e=5){const n=new r["A"],i=new r["A"];n.set(t.x,t.y,.5);const o=this.camera;n.unproject(o),n.sub(o.position).normalize();var s=(e-o.position.z)/n.z;return i.copy(o.position).add(n.multiplyScalar(s)),i},get3DPosByCanvasPoss(t,e=-5){const n=new r["A"],i=new r["A"];n.set(t.x,t.y,.5);const o=this.camera;n.unproject(o),n.sub(o.position).normalize();var s=(e-o.position.z)/n.z;return i.copy(o.position).add(n.multiplyScalar(s)),i},queryPtInPolygon(t,e){var n,i,o,r;n=t,i={x:1e12,y:t.y};for(var s=0,a=0;a<e.length-1;a++)o=e[a],r=e[a+1],!0===l(n,i,o,r)&&s++;return o=e[e.length-1],r=e[0],!0===l(n,i,o,r)&&s++,s%2!==0;function l(t,e,n,i){var o={x:t.x-n.x,y:t.y-n.y},r={x:e.x-n.x,y:e.y-n.y},s={x:i.x-n.x,y:i.y-n.y},a=u(o,s)*u(r,s);return o={x:n.x-t.x,y:n.y-t.y},r={x:i.x-t.x,y:i.y-t.y},s={x:e.x-t.x,y:e.y-t.y},!!(a<=0&&u(o,s)*u(r,s)<=0)}function u(t,e){return t.x*e.y-t.y*e.x}},queryPtInPolygonY(t,e){var n,i,o,r;n=t,i={x:1e12,z:t.z};for(var s=0,a=0;a<e.length-1;a++)o=e[a],r=e[a+1],!0===l(n,i,o,r)&&s++;return o=e[e.length-1],r=e[0],!0===l(n,i,o,r)&&s++,s%2!==0;function l(t,e,n,i){var o={x:t.x-n.x,z:t.z-n.z},r={x:e.x-n.x,z:e.z-n.z},s={x:i.x-n.x,z:i.z-n.z},a=u(o,s)*u(r,s);return o={x:n.x-t.x,z:n.z-t.z},r={x:i.x-t.x,z:i.z-t.z},s={x:e.x-t.x,z:e.z-t.z},!!(a<=0&&u(o,s)*u(r,s)<=0)}function u(t,e){return t.x*e.z-t.z*e.x}},queryPtInPolygonZ(t,e){var n,i,o,r;n=t,i={z:1e12,y:t.y};for(var s=0,a=0;a<e.length-1;a++)o=e[a],r=e[a+1],!0===l(n,i,o,r)&&s++;return o=e[e.length-1],r=e[0],!0===l(n,i,o,r)&&s++,s%2!==0;function l(t,e,n,i){var o={z:t.z-n.z,y:t.y-n.y},r={z:e.z-n.z,y:e.y-n.y},s={z:i.z-n.z,y:i.y-n.y},a=u(o,s)*u(r,s);return o={z:n.z-t.z,y:n.y-t.y},r={z:i.z-t.z,y:i.y-t.y},s={z:e.z-t.z,y:e.y-t.y},!!(a<=0&&u(o,s)*u(r,s)<=0)}function u(t,e){return t.z*e.y-t.y*e.z}},destroyModel(){console.log("销毁模型"),clearTimeout();try{this.scene.clear(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer.content=null,cancelAnimationFrame(this.animationId);const t=this.renderer.domElement.getContext("webgl");t&&t.getExtension("WEBGL_lose_context").loseContext(),console.log("销毁成功")}catch(t){console.log(t),console.log("销毁失败")}},init(){this.elem=document.getElementById("three"),this.renderer=new r["B"]({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.elem.clientWidth,this.elem.clientHeight),this.elem.appendChild(this.renderer.domElement),this.scene=new r["u"],this.camera=new r["p"](30,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.z=250;const t=new r["a"](20);this.scene.add(t),this.camera.position.set(0,0,20),this.scene.add(this.camera),this.controls=new a["a"](this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.render),this.controls.minDistance=.5,this.controls.maxDistance=100;const e=new s;e.load("./static/models/pcd/0002.pcd",t=>{console.log(t),console.log(t.geometry),console.log(t.geometry.getAttribute("position")),t.material.size=.01,t.material.vertexColors=!0,t.position.set(0,0,0),t.geometry.center(0,0,0),t.geometry.rotateZ(Math.PI),t.name="Zaghetto.pcd";const e=[],n=new r["f"],i=[];n.setRGB(241,18,18),console.log(n);for(let o=0,r=t.geometry.getAttribute("position").count;o<r;o++)n.setRGB(241,18,18),e.push(.02573108673095703,2.431320905685425,11.70892333984375),i[o]=1;t.geometry.setAttribute("color",new r["d"](new Float32Array(e),3)),t.geometry.setAttribute("size",new r["i"](i,1)),this.scene.add(t),this.render()}),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keypress",this.keyboard),this.animate()},onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},keyboard(t){const e=this.scene.getObjectByName("Zaghetto.pcd");switch(t.key||String.fromCharCode(t.keyCode||t.charCode)){case"+":e.material.size*=1.2;break;case"-":e.material.size/=1.2;break;case"c":e.material.color.setHex(16777215*Math.random());break}this.render()},render(){this.renderer.render(this.scene,this.camera)},animate(){requestAnimationFrame(this.animate),this.render()},add(){this.controls=new a["a"](this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.render),this.controls.minDistance=.5,this.controls.maxDistance=100,this.isbiaozhu=!0;const t=document.getElementById("lasso");t.style.display="none"},deleteee(){this.controls.dispose(),this.isbiaozhu=!1;const t=document.getElementById("lasso");t.style.display="block"},mouseups(t){const e=new r["z"],n=new r["t"],i=this.renderer.domElement.getBoundingClientRect(),o=this.scene.getObjectByName("Zaghetto.pcd");e.x=(t.clientX-i.left)/this.elem.clientWidth*2-1,e.y=-(t.clientY-i.top)/this.elem.clientHeight*2+1,this.camera.filmGauge=1,n.setFromCamera(e,this.camera),n.params.Line.threshold=.01,n.params.Points.threshold=.01;const s=n.intersectObject(o);console.log(o.geometry.attributes.position.array[398337]),console.log(o.geometry.attributes.position.array[398338]),console.log(o.geometry.attributes.position.array[398339]),console.log(s),s.sort((t,e)=>t.distanceToRay-e.distanceToRay);const a=20;let l;const u=o.geometry,c=u.attributes;if(s.length>0)for(let r=0;r<s.length;r++)l!==s[r].index&&(l=s[r].index,c.color.array[3*l]=11.97149658203125,c.color.array[3*l+1]=7.171534538269043,c.color.array[3*l+2]=.4309532642364502,c.color.needsUpdate=!0,this.render());else null!==l&&(c.size.array[l]=a,c.size.needsUpdate=!0,l=null)},tween3D(t){if("3D"===this.ControlsType){const s=this;this.camera.lookAt(new r["A"](0,0,0));var e={x:this.camera.position.x/2.2,y:this.camera.position.y-15,z:this.camera.position.z/2.2},n={x:t.x,y:t.y,z:t.z},i=new l["a"].Tween(e).to(n,1200),o=function(t){s.camera.position.set(2.2*t.x,t.y+15,2.2*t.z),s.camera.lookAt(0,0,0),s.controls.enabled=!1,s.controls.update()};i.onUpdate(o),i.onComplete(()=>{s.controls.enabled=!0}),i.easing(l["a"].Easing.Quadratic.InOut),i.start()}},tween2D(t){const e=this;this.camera.lookAt(new r["A"](0,0,0));var n={x:this.camera.position.x,y:this.camera.position.y-40,z:this.camera.position.z},i={x:t.x,y:t.y,z:t.z},o=new l["a"].Tween(n).to(i,1200),s=function(t){e.camera.position.set(t.x,t.y+40,t.z),e.camera.lookAt(0,0,0),e.controls.enabled=!1,e.controls.update()};o.onUpdate(s),o.onComplete(()=>{e.controls.enabled=!0}),o.easing(l["a"].Easing.Quadratic.InOut),o.start()},ChangeControl(t){this.ControlsType=t,"2D"===this.ControlsType?(alert(2),this.tween2D({x:0,y:0,z:0})):(this.threejs.controls.reset(),this.tween3D({x:20,y:20,z:20}))}},mounted(){setTimeout(()=>{this.init(),this.getcanvas()},0)},beforeDestroy(){this.destroyModel()},watch:{}},c=u,h=(n("b7d9"),n("2877")),d=Object(h["a"])(c,i,o,!1,null,"d405ee56",null);e["default"]=d.exports},fa06:function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return r}));var o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:r.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r=new o;r.Group=o,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&"undefined"!=typeof t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==0&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var o=this._valuesStart[e]||0,r=this._valuesEnd[e];r instanceof Array?this._object[e]=this._interpolationFunction(r,i):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?o+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[e]=o+(r-o)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var s=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=s}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),s=r.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],i):1<e?s(t[n],t[n-1],n-i):s(t[o],t[n<o+1?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,s=r.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=o(1-e,i-a)*o(e,a)*t[a]*s(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),s=r.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),s(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(s(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):s(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=r.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;1<i;i--)n*=i;return t[e]=n}}(),CatmullRom:function(t,e,n,i,o){var r=.5*(n-t),s=.5*(i-e),a=o*o;return(2*e-2*n+r+s)*(o*a)+(-3*e+3*n-2*r-s)*a+r*o+e}}},function(t){"function"==typeof define&&n("3c35")?define([],(function(){return r})):"object"==typeof exports?i.exports=r:void 0!==t&&(t.TWEEN=r)}(void 0)}).call(this,n("4362"),n("dd40")(t))}}]);